import { CdkDragDrop, CdkDragEnter, CdkDragExit, moveItemInArray } from '@angular/cdk/drag-drop';
import { Component, OnInit } from '@angular/core';
import { Task } from './shared/models/item';

@Component({
  selector: 'cdk-drag-drop-nested-lists-example',
  templateUrl: 'app.html',
  styleUrls: ['app.scss']
})
export class CdkDragDropNestedListsExample implements OnInit {
  // public parentItem: Item;
  public get connectedDropListsIds(): string[] {
    // We reverse ids here to respect items nesting hierarchy
    return this.getIdsRecursive(this.parentItem).reverse();
  }

  parentItem: Task = {
	"taskName": "",
	"taskID": 1211,
  "rsrcCount": 6,
  "startDate": "10/25/2018",
  "origDueMS": 1540969200000,
  "origDoneMS": "0",
  "parentMileStones": "",
  "isOverBooked": true,
  "assignedTo": [],
  "hasCharges": false,
  "isCollapsed": false,
  "numOfRoles": 2,
  "taskCode": "",
  "doneMS": "0",
  "taskNum": 1,
  "dependency": "",
  "doneDate": "",
  "numOfItems": 2,
  "showChildTask": true,
  "canWrite": true,
  "taskStatusColor": "#ffff00",
  "dueMS": 1540969200000,
  "taskAgenda": "",
  "dueDate": "10/31/2018",
  "startMS": 1540450800000,
  "hasStartAndDueDates": true,
  "origStartMS": 1540450800000,
  "isTaskVisible": true,
  "taskWorkflowStatus": "",
  "taskPriorityColor": "#14ff00",
  "isMileStone": false,
  "numOfBlogs": 0,
  "BHMPH_Task": true,
  "isTrigger": false,
  "issueID": 0,
  "taskPriority": 5,
  "taskStatusName": "CCCC",
  "isLocked": false,
  "hasCustomForm": false,
  "isDone": false,
  "daartID": 0,
  "duration": 5,
  "indentLevel": 0,
  "taskStatus": "C",
  "totalHrs": 120,
  "hasChild": false,
  "hasNote": false,
	"tasks": [{
		"rsrcCount": 6,
		"startDate": "10/25/2018",
		"origDueMS": 1540969200000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": true,
		"assignedTo": [],
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 2,
		"taskCode": "",
		"taskName": "new 3",
		"doneMS": "0",
		"taskNum": 1,
		"taskID": 6451,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 2,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "#ffff00",
		"dueMS": 1540969200000,
		"taskAgenda": "",
		"dueDate": "10/31/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#14ff00",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 5,
		"taskStatusName": "CCCC",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 5,
		"indentLevel": 0,
		"taskStatus": "C",
		"totalHrs": 120,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 2,
		"startDate": "01/02/2019",
		"origDueMS": 1547539200000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": [],
		"hasCharges": true,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "NEW 2",
		"doneMS": "0",
		"taskNum": 2,
		"taskID": 6486,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 1,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "",
		"dueMS": 1547539200000,
		"taskAgenda": "",
		"dueDate": "01/15/2019",
		"startMS": 1546416000000,
		"hasStartAndDueDates": true,
		"origStartMS": 1546416000000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#ff4500",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 9,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 10,
		"indentLevel": 0,
		"taskStatus": "A",
		"totalHrs": 9,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 1,
		"startDate": "10/25/2018",
		"origDueMS": 1540450800000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": [],
		"hasCharges": true,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "NEW 3 - Task Transfer Test",
		"doneMS": "0",
		"taskNum": 3,
		"taskID": 6488,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 5,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "#800080",
		"dueMS": 1540450800000,
		"taskAgenda": "",
		"dueDate": "10/25/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#00dbff",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 3,
		"taskStatusName": "FFFFF",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 1,
		"indentLevel": 0,
		"taskStatus": "F",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1542182400000,
		"origDoneMS": 1470639600000,
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "Printer Specs",
		"doneMS": 1470639600000,
		"taskNum": 4,
		"taskID": 1653,
		"dependency": "",
		"doneDate": "08/08/2016",
		"numOfItems": 0,
		"showChildTask": true,
		"canWrite": false,
		"taskStatusColor": "#008000",
		"dueMS": 1542182400000,
		"taskAgenda": "",
		"dueDate": "11/14/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#ffe700",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 7,
		"taskStatusName": "DDDD",
		"isLocked": false,
		"hasCustomForm": true,
		"isDone": true,
		"daartID": 0,
		"duration": 15,
		"indentLevel": 0,
		"taskStatus": "D",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1540450800000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "new 2",
		"doneMS": "0",
		"taskNum": 5,
		"taskID": 6452,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 2,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "",
		"dueMS": 1540450800000,
		"taskAgenda": "",
		"dueDate": "10/25/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#359cff",
		"isMileStone": false,
		"numOfBlogs": 2,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 2,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 1,
		"indentLevel": 0,
		"taskStatus": "",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1542182400000,
		"origDoneMS": 1470034800000,
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "On Press",
		"doneMS": 1470034800000,
		"taskNum": 6,
		"taskID": 1654,
		"dependency": "",
		"doneDate": "08/01/2016",
		"numOfItems": 0,
		"showChildTask": true,
		"canWrite": false,
		"taskStatusColor": "#ffff00",
		"dueMS": 1542182400000,
		"taskAgenda": "",
		"dueDate": "11/14/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#ff9200",
		"isMileStone": false,
		"numOfBlogs": 1,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 8,
		"taskStatusName": "CCCC",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": true,
		"daartID": 0,
		"duration": 15,
		"indentLevel": 0,
		"taskStatus": "C",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1542182400000,
		"origDoneMS": 1471244400000,
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "Delivery",
		"doneMS": 1471244400000,
		"taskNum": 7,
		"taskID": 1655,
		"dependency": "",
		"doneDate": "08/15/2016",
		"numOfItems": 1,
		"showChildTask": true,
		"canWrite": false,
		"taskStatusColor": "",
		"dueMS": 1542182400000,
		"taskAgenda": "",
		"dueDate": "11/14/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#ada5ff",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 1,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": true,
		"daartID": 0,
		"duration": 15,
		"indentLevel": 0,
		"taskStatus": "",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1542182400000,
		"origDoneMS": 1470639600000,
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "Presentation",
		"doneMS": 1470639600000,
		"taskNum": 8,
		"taskID": 1358,
		"dependency": "",
		"doneDate": "08/08/2016",
		"numOfItems": 2,
		"showChildTask": true,
		"canWrite": false,
		"taskStatusColor": "#0000ff",
		"dueMS": 1542182400000,
		"taskAgenda": "",
		"dueDate": "11/14/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#a6ff00",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 6,
		"taskStatusName": "EEEEE",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": true,
		"daartID": 0,
		"duration": 15,
		"indentLevel": 0,
		"taskStatus": "E",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1541577600000,
		"origDoneMS": 1470812400000,
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "Client Approval",
		"doneMS": 1470812400000,
		"taskNum": 9,
		"taskID": 1360,
		"dependency": "",
		"doneDate": "08/10/2016",
		"numOfItems": 2,
		"showChildTask": true,
		"canWrite": false,
		"taskStatusColor": "#ff6600",
		"dueMS": 1541577600000,
		"taskAgenda": "",
		"dueDate": "11/07/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#ada5ff",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 1,
		"taskStatusName": "BBBB",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": true,
		"daartID": 0,
		"duration": 10,
		"indentLevel": 0,
		"taskStatus": "B",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1540537200000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": true,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "Photography",
		"doneMS": "0",
		"taskNum": 10,
		"taskID": 1362,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 0,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "",
		"dueMS": 1540537200000,
		"taskAgenda": "",
		"dueDate": "10/26/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#14ff00",
		"isMileStone": true,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"tasks": [{
			"rsrcCount": 2,
			"startDate": "10/25/2018",
			"origDueMS": 1590476400000,
			"origDoneMS": "0",
			"parentMileStones": "$10$",
			"isOverBooked": true,
			"assignedTo": [],
			"hasCharges": false,
			"isCollapsed": false,
			"numOfRoles": 0,
			"taskCode": "",
			"taskName": "Rough Layout",
			"doneMS": "0",
			"taskNum": 11,
			"taskID": 1363,
			"dependency": "",
			"doneDate": "",
			"numOfItems": 2,
			"showChildTask": false,
			"canWrite": true,
			"taskStatusColor": "#008000",
			"dueMS": 1590476400000,
			"taskAgenda": "",
			"dueDate": "05/26/2020",
			"startMS": 1540450800000,
			"hasStartAndDueDates": true,
			"origStartMS": 1540450800000,
			"isTaskVisible": false,
			"taskWorkflowStatus": "",
			"taskPriorityColor": "#ada5ff",
			"isMileStone": false,
			"numOfBlogs": 0,
			"BHMPH_Task": true,
			"isTrigger": false,
			"issueID": 0,
			"taskPriority": 1,
			"taskStatusName": "DDDD",
			"isLocked": false,
			"hasCustomForm": false,
			"isDone": false,
			"daartID": 0,
			"duration": 409,
			"indentLevel": 1,
			"taskStatus": "D",
			"totalHrs": 1,
			"hasChild": false,
			"hasNote": false,
      "tasks": []
		}, {
			"rsrcCount": 0,
			"startDate": "10/25/2018",
			"origDueMS": 1540537200000,
			"origDoneMS": "0",
			"parentMileStones": "$10$",
			"isOverBooked": false,
			"assignedTo": "",
			"hasCharges": false,
			"isCollapsed": false,
			"numOfRoles": 0,
			"taskCode": "",
			"taskName": "Presentation",
			"doneMS": "0",
			"taskNum": 12,
			"taskID": 1364,
			"dependency": "",
			"doneDate": "",
			"numOfItems": 1,
			"showChildTask": false,
			"canWrite": true,
			"taskStatusColor": "",
			"dueMS": 1540537200000,
			"taskAgenda": "",
			"dueDate": "10/26/2018",
			"startMS": 1540450800000,
			"hasStartAndDueDates": true,
			"origStartMS": 1540450800000,
			"isTaskVisible": false,
			"taskWorkflowStatus": "",
			"taskPriorityColor": "#00dbff",
			"isMileStone": false,
			"numOfBlogs": 0,
			"BHMPH_Task": true,
			"isTrigger": false,
			"issueID": 0,
			"taskPriority": 3,
			"taskStatusName": "",
			"isLocked": false,
			"hasCustomForm": false,
			"isDone": false,
			"daartID": 0,
			"duration": 2,
			"indentLevel": 1,
			"taskStatus": "A",
			"totalHrs": 0,
			"hasChild": false,
			"hasNote": false,
      "tasks": []
		}, {
			"rsrcCount": 0,
			"startDate": "10/25/2018",
			"origDueMS": 1542182400000,
			"origDoneMS": 1471330800000,
			"parentMileStones": "$10$",
			"isOverBooked": false,
			"assignedTo": "",
			"hasCharges": false,
			"isCollapsed": false,
			"numOfRoles": 0,
			"taskCode": "",
			"taskName": "Printer Specs",
			"doneMS": 1471330800000,
			"taskNum": 13,
			"taskID": 1365,
			"dependency": "",
			"doneDate": "08/16/2016",
			"numOfItems": 0,
			"showChildTask": false,
			"canWrite": false,
			"taskStatusColor": "",
			"dueMS": 1542182400000,
			"taskAgenda": "",
			"dueDate": "11/14/2018",
			"startMS": 1540450800000,
			"hasStartAndDueDates": true,
			"origStartMS": 1540450800000,
			"isTaskVisible": false,
			"taskWorkflowStatus": "",
			"taskPriorityColor": "#a6ff00",
			"isMileStone": false,
			"numOfBlogs": 0,
			"BHMPH_Task": true,
			"isTrigger": false,
			"issueID": 0,
			"taskPriority": 6,
			"taskStatusName": "",
			"isLocked": false,
			"hasCustomForm": false,
			"isDone": true,
			"daartID": 0,
			"duration": 15,
			"indentLevel": 1,
			"taskStatus": "",
			"totalHrs": 0,
			"hasChild": false,
			"hasNote": false,
      "tasks": []
		}],
		"issueID": 0,
		"taskPriority": 5,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 2,
		"indentLevel": 0,
		"taskStatus": "",
		"totalHrs": 0,
		"hasChild": true,
		"hasNote": false
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1542268800000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "On Press test",
		"doneMS": "0",
		"taskNum": 14,
		"taskID": 1366,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 0,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "",
		"dueMS": 1542268800000,
		"taskAgenda": "",
		"dueDate": "11/15/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#359cff",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 2,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 16,
		"indentLevel": 0,
		"taskStatus": "",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1542182400000,
		"origDoneMS": 1471330800000,
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "Delivery",
		"doneMS": 1471330800000,
		"taskNum": 15,
		"taskID": 1367,
		"dependency": "",
		"doneDate": "08/16/2016",
		"numOfItems": 0,
		"showChildTask": true,
		"canWrite": false,
		"taskStatusColor": "",
		"dueMS": 1542182400000,
		"taskAgenda": "",
		"dueDate": "11/14/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#00dbff",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 3,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": true,
		"daartID": 0,
		"duration": 15,
		"indentLevel": 0,
		"taskStatus": "",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}, {
		"rsrcCount": 0,
		"startDate": "10/25/2018",
		"origDueMS": 1540450800000,
		"origDoneMS": "0",
		"parentMileStones": "",
		"isOverBooked": false,
		"assignedTo": "",
		"hasCharges": false,
		"isCollapsed": false,
		"numOfRoles": 0,
		"taskCode": "",
		"taskName": "m",
		"doneMS": "0",
		"taskNum": 16,
		"taskID": 6419,
		"dependency": "",
		"doneDate": "",
		"numOfItems": 0,
		"showChildTask": true,
		"canWrite": true,
		"taskStatusColor": "",
		"dueMS": 1540450800000,
		"taskAgenda": "",
		"dueDate": "10/25/2018",
		"startMS": 1540450800000,
		"hasStartAndDueDates": true,
		"origStartMS": 1540450800000,
		"isTaskVisible": true,
		"taskWorkflowStatus": "",
		"taskPriorityColor": "#14ff00",
		"isMileStone": false,
		"numOfBlogs": 0,
		"BHMPH_Task": true,
		"isTrigger": false,
		"issueID": 0,
		"taskPriority": 5,
		"taskStatusName": "",
		"isLocked": false,
		"hasCustomForm": false,
		"isDone": false,
		"daartID": 0,
		"duration": 1,
		"indentLevel": 0,
		"taskStatus": "",
		"totalHrs": 0,
		"hasChild": false,
		"hasNote": false,
    "tasks": []
	}]
}

  constructor() {
  }

  public ngOnInit() {
    
  }

  public onDragDrop(event: CdkDragDrop<Task>) {
    event.container.element.nativeElement.classList.remove('active');
    if (this.canBeDropped(event)) {
      const movingItem: Task = event.item.data;
      event.container.data.tasks.push(movingItem);
      event.previousContainer.data.tasks = event.previousContainer.data.tasks.filter((child) => child.taskID !== movingItem.taskID);
    } else {
      moveItemInArray(
        event.container.data.tasks,
        event.previousIndex,
        event.currentIndex
      );
    }
  }

  private getIdsRecursive(item: Task): string[] {
    let ids = [item.taskID.toString()];
    item.tasks.forEach((childItem) => { ids = ids.concat(this.getIdsRecursive(childItem)) });
    return ids;
  }

  private canBeDropped(event: CdkDragDrop<Task, Task>): boolean {
    const movingItem: Task = event.item.data;

    return event.previousContainer.id !== event.container.id
      && this.isNotSelfDrop(event)
      && !this.hasChild(movingItem, event.container.data);
  }

  private isNotSelfDrop(event: CdkDragDrop<Task> | CdkDragEnter<Task> | CdkDragExit<Task>): boolean {
    console.log('test')
    return event.container.data.taskID !== event.item.data.taskID;
  }

  private hasChild(parentItem: Task, childItem: Task): boolean {
    const hasChild = parentItem.tasks.some((item) => item.taskID === childItem.taskID);
    return hasChild ? true : parentItem.tasks.some((item) => this.hasChild(item, childItem));
  }
}
